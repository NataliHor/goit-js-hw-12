{"version":3,"file":"commonHelpers.js","sources":["../src/pixabay-api.js","../src/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44809751-3b2ccf197f9e8e95d68b14f11';\n\nexport async function getPictures({ q = '', page = 1, per_page = 15 } = {}) {\n  try {\n    const response = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page,\n        language: 'en',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n}).refresh();\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\"/>\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\"> <h2 class=\"info-text\">Likes</h2> <p class=\"info-value\">${likes}</p> </li>\n            <li class=\"info-item\"> <h2 class=\"info-text\">Views</h2> <p class=\"info-value\">${views}</p> </li>\n            <li class=\"info-item\"> <h2 class=\"info-text\">Comments</h2> <p class=\"info-value\">${comments}</p> </li>\n            <li class=\"info-item\"> <h2 class=\"info-text\">Downloads</h2> <p class=\"info-value\">${downloads}</p> </li>\n          </ul>\n        </li>\n    `\n    )\n    .join('');\n  gallery.innerHTML += markup;\n  lightbox.refresh();\n}\n","import { getPictures } from './pixabay-api';\nimport { renderGallery } from './render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loading = document.querySelector('.loading');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\nloadBtn.addEventListener('click', handleLoadMore);\nsearchForm.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  params.page = 1;\n  const form = event.currentTarget;\n  params.q = form.elements.query.value.toLowerCase();\n\n  if (params.q === '') {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n\n    return;\n  }\n  loading.style.display = 'flex';\n  try {\n    const data = await getPictures(params);\n    if (data.hits.length === 0) {\n      loadBtn.style.display = 'none';\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!!!',\n      });\n    } else {\n      params.maxPage = Math.ceil(data.totalHits / params.per_page);\n      renderGallery(data.hits);\n      if (params.page < params.maxPage) {\n        loadBtn.style.display = 'flex';\n      } else {\n        loadBtn.style.display = 'none';\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there was an error fetching images. Please try again later!',\n    });\n  } finally {\n    loading.style.display = 'none';\n  }\n}\n\nasync function handleLoadMore() {\n  loadBtn.style.display = 'none';\n  loading.style.display = 'flex';\n  params.page += 1;\n  try {\n    const data = await getPictures(params);\n    renderGallery(data.hits);\n    if (params.page < params.maxPage) {\n      loadBtn.style.display = 'flex';\n    } else {\n      loadBtn.style.display = 'none';\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n    const galleryItem = document.querySelector('.gallery');\n    const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth',\n    });\n    loadBtn.style.display = 'flex';\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there was an error fetching images. Please try again later!',\n    });\n  } finally {\n    loading.style.display = 'none';\n  }\n}\n"],"names":["BASE_URL","API_KEY","getPictures","q","page","per_page","axios","error","lightbox","SimpleLightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loading","loadBtn","params","handleLoadMore","handleSearch","event","form","iziToast","data","galleryItemHeight"],"mappings":"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"}