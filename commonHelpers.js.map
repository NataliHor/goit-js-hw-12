{"version":3,"file":"commonHelpers.js","sources":["../src/pixabay-api.js","../src/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst BASE_URL = 'https://pixabay.com';\nconst ENDPOINT = '/api';\nconst API_KEY = '44809751-3b2ccf197f9e8e95d68b14f11';\n\naxios.defaults.baseURL = BASE_URL;\n\nfunction getPictures({ q = '', page = 1, per_page = 15 } = {}) {\n  return axios\n    .get(ENDPOINT, {\n      params: {\n        key: API_KEY,\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page,\n        language: 'en',\n      },\n    })\n    .then(({ data }) => data);\n}\n\nexport { getPictures };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n}).refresh();\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\"/>\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\"> <h2 class=\"info-text\">Likes</h2> <p class=\"info-value\">${likes}</p> </li>\n            <li class=\"info-item\"> <h2 class=\"info-text\">Views</h2> <p class=\"info-value\">${views}</p> </li>\n            <li class=\"info-item\"> <h2 class=\"info-text\">Comments</h2> <p class=\"info-value\">${comments}</p> </li>\n            <li class=\"info-item\"> <h2 class=\"info-text\">Downloads</h2> <p class=\"info-value\">${downloads}</p> </li>\n          </ul>\n        </li>\n    `\n    )\n    .join('');\n  gallery.innerHTML += markup;\n  lightbox.refresh();\n}\n","import { getPictures } from './pixabay-api';\nimport { renderGallery } from './render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loading = document.querySelector('.loading');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst params = {\n  q: '',\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\nsearchForm.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  params.page = 1;\n  const form = event.currentTarget;\n  params.q = form.elements.query.value.toLowerCase();\n\n  if (params.q === '') {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n\n    return;\n  }\n  loading.style.display = 'flex';\n  try {\n    const data = await getPictures(params);\n    if (data.hits.length === 0) {\n      loadBtn.style.display = 'none';\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!!!',\n      });\n    } else {\n      params.maxPage = Math.ceil(data.totalHits / params.per_page);\n      renderGallery(data.hits);\n      if (data.hits.length > 0 && data.hits.length !== data.totalHits) {\n        loadBtn.style.display = 'flex';\n        loadBtn.addEventListener('click', handleLoadMore);\n      }\n    }\n    if (params.page === params.maxPage) {\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadBtn.style.display = 'none';\n      loadBtn.removeEventListener('click', handleLoadMore);\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there was an error fetching images. Please try again later!',\n    });\n    loadBtn.style.display = 'none';\n  } finally {\n    loading.style.display = 'none';\n  }\n}\n\nasync function handleLoadMore() {\n  loadBtn.style.display = 'none';\n  loading.style.display = 'flex';\n  params.page += 1;\n  try {\n    const data = await getPictures(params);\n    renderGallery(data.hits);\n    const galleryItem = document.querySelector('.gallery');\n    const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth',\n    });\n    loadBtn.style.display = 'flex';\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there was an error fetching images. Please try again later!',\n    });\n  } finally {\n    loading.style.display = 'none';\n  }\n}\n"],"names":["BASE_URL","ENDPOINT","API_KEY","axios","getPictures","q","page","per_page","data","lightbox","SimpleLightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loading","loadBtn","params","handleSearch","event","form","iziToast","handleLoadMore","galleryItemHeight"],"mappings":"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"}